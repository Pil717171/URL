!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),i=n(2);new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shortLinks=[],this.inp=document.querySelector(".big-link"),this.router=new o.Router,this.links=[];new i.Register;this.init(),this.getLink(),this.regBut(),this.logBut()}return r(e,[{key:"init",value:function(){var e=this;fetch("http://localhost:3006/links",{headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.links=t,e.initRoutes(),console.log(e.links),window.dispatchEvent(new HashChangeEvent("hashchange"))})}},{key:"getLink",value:function(){var e=this;document.querySelector(".submit").addEventListener("click",function(t){t.preventDefault(),e.inp.value?e.sendData(e.inp.value):e.renderInputError()})}},{key:"renderInputError",value:function(){console.log("Ошибка, Вы не ввели ссылку")}},{key:"sendData",value:function(e){var t=this;console.log(e),fetch("http://localhost:3006/links",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:e})}).then(function(e){return 201!==e.status&&console.log("Post ERROR"),e.json()}).then(function(e){t.shortLink(e)})}},{key:"shortLink",value:function(e){var t="pil/"+e.id;this.shortLinks.push(t),this.renderLinks(t),console.log(e)}},{key:"renderLinks",value:function(e){var t=document.querySelector(".result"),n=document.createElement("a");console.log(this.inp.value),n.setAttribute("href",this.inp.value),n.innerHTML=e+" <br>",t.appendChild(n),this.inp.value=""}},{key:"initRoutes",value:function(){this.router.addRoute("",this.renderHomePage.bind(this)),this.router.addRoute("#about",this.renderAboutPage.bind(this)),this.router.addRoute("#main",this.renderMainPage.bind(this)),this.router.addRoute("404",this.renderErrorPage.bind(this))}},{key:"renderHomePage",value:function(){var e=document.querySelector(".home");console.log(e),e.classList.add("visible")}},{key:"renderAboutPage",value:function(){var e=document.querySelector(".about");console.log(e),e.classList.add("visible")}},{key:"renderMainPage",value:function(){document.querySelector(".main").classList.add("visible")}},{key:"renderErrorPage",value:function(){document.querySelector(".error").classList.add("visible")}},{key:"regBut",value:function(){var e=this;document.querySelector(".registration").addEventListener("click",function(){e.renderAboutPage(),history.pushState({},"about","#about"),window.dispatchEvent(new HashChangeEvent("hashchange"))})}},{key:"logBut",value:function(){var e=this;document.querySelector(".login").addEventListener("click",function(){e.renderMainPage(),history.pushState({},"main","#main"),window.dispatchEvent(new HashChangeEvent("hashchange"))})}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Router=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routes={404:function(){console.log("Not found")}},this.mainContentPages=document.querySelectorAll(".page"),window.addEventListener("hashchange",function(e){t.render(decodeURI(window.location.hash))})}return r(e,[{key:"addRoute",value:function(e,t){this.routes[e]=t}},{key:"render",value:function(e){var t=e.split("/")[0];console.log(t),[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.mainContentPages)).forEach(function(e){e.classList.remove("visible")}),this.routes[t]?this.routes[t]():this.routes[404]()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Register=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isRegistered=!1,this.checkRegistration(),this.register()}return r(e,[{key:"checkRegistration",value:function(){}},{key:"register",value:function(){console.log(location.host)}}]),e}()}]);
//# sourceMappingURL=bundle.js.map