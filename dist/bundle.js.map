{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app.js","webpack:///./src/router.js","webpack:///./src/register.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_router","_register","App","_classCallCheck","this","shortLinks","inp","document","querySelector","router","Router","links","Register","init","getLink","regBut","logBut","_this","fetch","headers","Content-Type","then","res","json","data","initRoutes","console","log","window","dispatchEvent","HashChangeEvent","_this2","addEventListener","e","preventDefault","sendData","renderInputError","_this3","method","body","JSON","stringify","source","status","shortLink","id","push","renderLinks","div","container","createElement","setAttribute","innerHTML","appendChild","addRoute","renderHomePage","renderAboutPage","renderMainPage","renderErrorPage","homePage","classList","add","aboutPage","_this4","history","pushState","_this5","routes","404","mainContentPages","querySelectorAll","render","decodeURI","location","hash","route","action","url","temp","split","concat","_toConsumableArray","forEach","page","remove","isRegistered","checkLogin","login","button","loginArray","checkPassword"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { Router } from './router';\r\nimport { Register } from './register';\r\n\r\nclass App {\r\n    constructor () {\r\n        this.shortLinks = [];\r\n        this.inp = document.querySelector('.big-link');\r\n        this.router = new Router();\r\n        this.links = [];\r\n        const register = new Register();\r\n        this.init();\r\n        this.getLink();\r\n        this.regBut();\r\n        this.logBut();\r\n        \r\n    }\r\n\r\n    \r\n\r\n    init() {\r\n        const url = 'http://localhost:3006/links';\r\n        fetch(url, { headers: {\r\n            'Content-Type': 'application/json'\r\n        }})\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                this.links = data;\r\n                this.initRoutes();\r\n                console.log(this.links);\r\n                window.dispatchEvent(new HashChangeEvent('hashchange'))\r\n            })\r\n    }\r\n\r\n    getLink() {\r\n        \r\n        let but = document.querySelector('.submit');\r\n        \r\n        but.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            if(this.inp.value) {\r\n                this.sendData(this.inp.value);\r\n            } else {\r\n                this.renderInputError();\r\n            }\r\n        })\r\n    }\r\n\r\n    renderInputError() {\r\n        console.log('Ошибка, Вы не ввели ссылку')\r\n    }\r\n\r\n    sendData(data) {\r\n        console.log(data)\r\n        fetch('http://localhost:3006/links', { method: 'post', headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n            body: JSON.stringify({\r\n                source: data\r\n            })\r\n        }) \r\n            \r\n        .then((res) => {\r\n            if(res.status !== 201) {\r\n                console.log(\"Post ERROR\")\r\n            }\r\n            return res.json();\r\n        })\r\n        .then((res) => {\r\n            this.shortLink(res);\r\n        })\r\n    }\r\n\r\n    shortLink(data) {\r\n        let pref = 'pil/';\r\n        let shortLink = pref + data.id;\r\n        this.shortLinks.push(shortLink);\r\n        this.renderLinks(shortLink)\r\n        console.log(data)\r\n    }\r\n\r\n    renderLinks(data) {\r\n        let div = document.querySelector('.result');\r\n        let container = document.createElement('a')\r\n        console.log(this.inp.value)\r\n        container.setAttribute('href', this.inp.value )\r\n        container.innerHTML = `Ваша короткая ссылка: ${data} ; Исходная ссылка: ${this.inp.value} <br>`;\r\n        div.appendChild(container)\r\n        this.inp.value = '';\r\n    }\r\n\r\n    initRoutes() {\r\n       this.router.addRoute('', this.renderHomePage.bind(this));\r\n       this.router.addRoute('#about', this.renderAboutPage.bind(this));\r\n       this.router.addRoute('#main', this.renderMainPage.bind(this));\r\n       this.router.addRoute('404', this.renderErrorPage.bind(this));\r\n    }\r\n\r\n    renderHomePage() {\r\n        let homePage = document.querySelector('.home');\r\n        console.log(homePage)\r\n        homePage.classList.add('visible');\r\n    }\r\n\r\n    renderAboutPage() {\r\n        let aboutPage = document.querySelector('.about');\r\n        console.log(aboutPage)\r\n        aboutPage.classList.add('visible');\r\n    }\r\n\r\n    renderMainPage() {\r\n        let mainPage = document.querySelector('.main');\r\n        mainPage.classList.add('visible');\r\n    }\r\n\r\n    renderErrorPage() {\r\n        let errorPage = document.querySelector('.error');\r\n        errorPage.classList.add('visible');\r\n    }\r\n\r\n    regBut() {\r\n        let reg = document.querySelector('.registration');\r\n        reg.addEventListener('click', () => {\r\n            this.renderAboutPage()\r\n            history.pushState( {},\"about\" , \"#about\");\r\n            window.dispatchEvent(new HashChangeEvent('hashchange'))\r\n            \r\n        })\r\n    }\r\n\r\n    logBut() {\r\n        let log = document.querySelector('.login');\r\n        log.addEventListener('click', () => {\r\n            this.renderMainPage()\r\n            history.pushState( {},\"main\" , \"#main\");\r\n            window.dispatchEvent(new HashChangeEvent('hashchange'))\r\n        })\r\n    }\r\n\r\n\r\n}\r\n\r\nconst app = new App();","export class Router {\r\n    constructor () {\r\n        this.routes = {\r\n            '404': () => {\r\n                console.log('Not found');\r\n            }\r\n        }\r\n        this.mainContentPages = document.querySelectorAll('.page');\r\n        \r\n    \r\n        window.addEventListener('hashchange', (e) => {\r\n            this.render(decodeURI(window.location.hash))\r\n        })\r\n    }\r\n    \r\n    addRoute(route, action) {\r\n        this.routes[route] = action;\r\n    }\r\n\r\n    render(url) {\r\n        let temp = url.split('/')[0];\r\n        console.log(temp);\r\n        [...this.mainContentPages].forEach((page) => {\r\n            page.classList.remove('visible');\r\n        });\r\n\r\n        this.routes[temp] ? this.routes[temp]() : this.routes['404']();\r\n    }\r\n}","export class Register {\r\n    constructor () {\r\n        this.isRegistered = false;\r\n        this.checkLogin();\r\n        \r\n    }\r\n\r\n    checkLogin() {\r\n        let login = document.querySelector('.registration-login');\r\n        let password = document.querySelector('.registration-password');\r\n        let passwordRepeat = document.querySelector('.registration-password-repeat');\r\n        let button = document.querySelector('.registration-submit');\r\n        let loginArray = [];\r\n\r\n        button.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            fetch('http://localhost:3006/users', { headers: {\r\n            'Content-Type': 'application/json'\r\n            }})\r\n                .then((res) => res.json())\r\n                .then((data) => {\r\n                    data.forEach((i) => {\r\n                        loginArray.push(i.login)\r\n                    });\r\n                })\r\n            loginArray.forEach((i) => {\r\n                console.log(i)\r\n                console.log(login.value)\r\n                if(login.value == i) {\r\n                    console.log('Такое имя уже есть. Введите другое');\r\n                    return false;\r\n                } else {\r\n                    this.checkPassword();\r\n                }\r\n            })\r\n        })\r\n        \r\n    }\r\n\r\n    checkPassword() {\r\n        console.log('checkpassword')\r\n    }\r\n }"],"sourceRoot":""}