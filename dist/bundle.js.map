{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/register.js","webpack:///./src/login.js","webpack:///./src/app.js","webpack:///./src/router.js","webpack:///./src/shortservice.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_login","Register","isRegistered","_classCallCheck","this","login","Login","checkLogin","_this","button","document","querySelector","loginArray","fetch","headers","Content-Type","then","res","json","data","forEach","push","addEventListener","e","preventDefault","some","repeatLogin","checkPassword","renderErrorSection","password","passwordRepeat","sendRegistration","failedRegistration","renderExitButton","method","body","JSON","stringify","status","console","log","localStorage","setItem","event","Event","window","dispatchEvent","textMessage","errorSection","errorSectionText","style","innerHTML","setTimeout","checkingLogin","exit","classList","add","exitEvent","linkContainer","isLogged","clear","remove","loginButton","logpageLogin","_this2","location","hash","_router","_register","_shortservice","App","pages","querySelectorAll","renderHomePage","checkRegister","router","Router","register","shortService","ShortService","init","regBut","logBut","localStorageService","links","initRoutes","HashChangeEvent","addRoute","renderAboutPage","renderMainPage","renderLoginPage","renderErrorPage","homePage","aboutPage","getItem","errorPage","backLink","history","pushState","_this3","routes","404","mainContentPages","render","decodeURI","route","action","url","temp","split","concat","_toConsumableArray","page","shortLinks","inp","getLink","register2","sendData","renderInputError","source","shortLink","id","renderLinks","div","container","createElement","span1","span2","span3","setAttribute","appendChild"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","import { Login } from \"./login\";\r\n\r\nexport class Register {\r\n  constructor(isRegistered) {\r\n    this.login = new Login();\r\n    this.isRegistered = isRegistered;\r\n    this.checkLogin();\r\n  }\r\n\r\n  checkLogin() {\r\n    let button = document.querySelector(\".registration-submit\");\r\n    let login = document.querySelector(\".registration-login\");\r\n    let loginArray = [];\r\n    fetch(\"http://localhost:3006/users\", {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        data.forEach(i => {\r\n          loginArray.push(i.login);\r\n        });\r\n      });\r\n\r\n    button.addEventListener(\"click\", e => {\r\n      e.preventDefault();\r\n      if (login.value) {\r\n        let repeat = loginArray.some(i => {\r\n          return i == login.value;\r\n        });\r\n        repeat ? this.repeatLogin() : this.checkPassword(login.value);\r\n      } else {\r\n        this.renderErrorSection(\"Поле с логином пустое. Введите логин\");\r\n      }\r\n    });\r\n  }\r\n\r\n  checkPassword(login) {\r\n    let password = document.querySelector(\".registration-password\");\r\n    let passwordRepeat = document.querySelector(\".registration-password-check\");\r\n    let loginField = document.querySelector(\".registration-login\");\r\n    if (password.value && passwordRepeat.value) {\r\n      password.value == passwordRepeat.value\r\n        ? this.sendRegistration(login, password.value)\r\n        : this.failedRegistration(passwordRepeat);\r\n    } else {\r\n      this.renderErrorSection(\"Поля с паролем не заполнены\");\r\n    }\r\n  }\r\n\r\n  repeatLogin() {\r\n    this.renderErrorSection(\"Такой логин уже существует. Введите другой\");\r\n  }\r\n\r\n  sendRegistration(login, password) {\r\n    this.login.renderExitButton();\r\n    fetch(\"http://localhost:3006/users\", {\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        login: login,\r\n        password: password\r\n      })\r\n    })\r\n      .then(res => {\r\n        if (res.status !== 201) {\r\n          console.log(\"Post ERROR\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n      });\r\n    this.isRegistered = true;\r\n    localStorage.setItem(\"login\", login);\r\n    let event = new Event(\"checkRegister\");\r\n    window.dispatchEvent(event);\r\n  }\r\n\r\n  failedRegistration(data) {\r\n    this.renderErrorSection(\"Пароли не совпадают. Попробуйте еще\");\r\n  }\r\n\r\n  renderErrorSection(textMessage) {\r\n    let errorSection = document.querySelector(\".error-section\");\r\n    let errorSectionText = document.querySelector(\".error-section-text\");\r\n    errorSection.style = \"opacity: 1\";\r\n    errorSectionText.innerHTML = textMessage;\r\n    setTimeout(() => {\r\n      let errorSection = document.querySelector(\".error-section\");\r\n      errorSection.style = \"opacity: 0\";\r\n    }, 2000);\r\n  }\r\n}\r\n","export class Login {\r\n  constructor() {\r\n    this.checkingLogin();\r\n  }\r\n\r\n  renderExitButton() {\r\n    let exit = document.querySelector(\".exit\");\r\n    exit.classList.add(\"visible\");\r\n    exit.addEventListener(\"click\", this.exitEvent);\r\n  }\r\n\r\n  exitEvent() {\r\n    let linkContainer = document.querySelector(\".result\");\r\n    this.isLogged = false;\r\n    localStorage.clear();\r\n    let exit = document.querySelector(\".exit\");\r\n    exit.classList.remove(\"visible\");\r\n    let exitEvent = new Event(\"exitEvent\");\r\n    window.dispatchEvent(exitEvent);\r\n    linkContainer.innerHTML = \"\";\r\n  }\r\n\r\n  getLogin() {\r\n    let loginButton = document.querySelector(\".logpage-submit\");\r\n    let logpageLogin = document.querySelector(\".logpage-login\");\r\n    let logpagePassword = document.querySelector(\".logpage-password\");\r\n    loginButton.addEventListener(\"click\", e => {\r\n      e.preventDefault();\r\n      if (logpageLogin.value) {\r\n        this.checkingLogin();\r\n      } else {\r\n      }\r\n    });\r\n  }\r\n\r\n  checkingLogin() {\r\n    let button = document.querySelector(\".logpage-submit\");\r\n    let login = document.querySelector(\".logpage-login\");\r\n    let password = document.querySelector(\".logpage-password\");\r\n    let loginArray = [];\r\n    fetch(\"http://localhost:3006/users\", {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        data.forEach(i => {\r\n          loginArray.push(i);\r\n        });\r\n      });\r\n\r\n    button.addEventListener(\"click\", e => {\r\n      e.preventDefault();\r\n      if (login.value && password.value) {\r\n        loginArray.forEach(i => {\r\n          if (i.login === login.value && i.password === password.value) {\r\n            window.location.hash = \"#main\";\r\n            localStorage.setItem(\"login\", login);\r\n            this.renderExitButton();\r\n          } else {\r\n            this.renderErrorSection(\r\n              \"Проверьте введенные данные. Логин или пароль неверные.\"\r\n            );\r\n            return false;\r\n          }\r\n        });\r\n      } else {\r\n        this.renderErrorSection(\"Поля не заполнены полностью\");\r\n      }\r\n    });\r\n  }\r\n\r\n  renderErrorSection(textMessage) {\r\n    let errorSection = document.querySelector(\".error-section\");\r\n    let errorSectionText = document.querySelector(\".error-section-text\");\r\n    errorSection.style = \"opacity: 1\";\r\n    errorSectionText.innerHTML = textMessage;\r\n    setTimeout(() => {\r\n      let errorSection = document.querySelector(\".error-section\");\r\n      errorSection.style = \"opacity: 0\";\r\n    }, 2000);\r\n  }\r\n}\r\n","import { Router } from \"./router\";\r\nimport { Register } from \"./register\";\r\nimport { Login } from \"./login\";\r\nimport { ShortService } from \"./shortservice\";\r\n\r\nclass App {\r\n  constructor() {\r\n    this.pages = document.querySelectorAll(\".page\");\r\n    window.addEventListener(\"exitEvent\", this.renderHomePage.bind(this));\r\n    window.addEventListener(\"checkRegister\", this.checkRegister.bind(this));\r\n    this.router = new Router();\r\n    this.register = new Register();\r\n    this.login = new Login();\r\n    this.shortService = new ShortService();\r\n    this.init();\r\n    this.login.checkingLogin();\r\n    this.regBut();\r\n    this.logBut();\r\n    this.localStorageService();\r\n    this.login.checkingLogin();\r\n  }\r\n\r\n  init() {\r\n    const url = \"http://localhost:3006/links\";\r\n    fetch(url, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        this.links = data;\r\n        this.initRoutes();\r\n        console.log(this.links);\r\n        window.dispatchEvent(new HashChangeEvent(\"hashchange\"));\r\n      });\r\n  }\r\n\r\n  initRoutes() {\r\n    this.router.addRoute(\"\", this.renderHomePage.bind(this));\r\n    this.router.addRoute(\"#about\", this.renderAboutPage.bind(this));\r\n    this.router.addRoute(\"#main\", this.renderMainPage.bind(this));\r\n    this.router.addRoute(\"#login\", this.renderLoginPage.bind(this));\r\n    this.router.addRoute(\"404\", this.renderErrorPage.bind(this));\r\n  }\r\n\r\n  renderHomePage() {\r\n    this.pages.forEach(i => {\r\n      console.log(i);\r\n      i.classList.remove(\"visible\");\r\n    });\r\n    let homePage = document.querySelector(\".home\");\r\n    console.log(homePage);\r\n    homePage.classList.add(\"visible\");\r\n    window.location.hash = \"\";\r\n    let exit = document.querySelector(\".exit\");\r\n    exit.classList.remove(\"visible\");\r\n  }\r\n\r\n  renderAboutPage() {\r\n    this.pages.forEach(i => {\r\n      console.log(i);\r\n      i.classList.remove(\"visible\");\r\n    });\r\n    let aboutPage = document.querySelector(\".about\");\r\n    console.log(aboutPage);\r\n    aboutPage.classList.add(\"visible\");\r\n    window.location.hash = \"#about\";\r\n    let exit = document.querySelector(\".exit\");\r\n    exit.classList.remove(\"visible\");\r\n  }\r\n\r\n  renderMainPage() {\r\n    if (localStorage.getItem(\"login\")) {\r\n      this.pages.forEach(i => {\r\n        i.classList.remove(\"visible\");\r\n      });\r\n      let mainPage = document.querySelector(\".main\");\r\n      mainPage.classList.add(\"visible\");\r\n      window.location.hash = \"#main\";\r\n    } else {\r\n      this.renderErrorPage();\r\n    }\r\n  }\r\n\r\n  renderErrorPage() {\r\n    this.pages.forEach(i => {\r\n      i.classList.remove(\"visible\");\r\n    });\r\n    let exit = document.querySelector(\".exit\");\r\n    let errorPage = document.querySelector(\".error\");\r\n    let backLink = document.querySelector(\".main-link\");\r\n    errorPage.classList.add(\"visible\");\r\n    window.location.hash = \"#error\";\r\n    exit.classList.remove(\"visible\");\r\n    backLink.addEventListener(\"click\", this.renderHomePage.bind(this));\r\n  }\r\n\r\n  renderLoginPage() {\r\n    this.pages.forEach(i => {\r\n      i.classList.remove(\"visible\");\r\n    });\r\n    let loginPage = document.querySelector(\".logpage\");\r\n    loginPage.classList.add(\"visible\");\r\n    window.location.hash = \"#login\";\r\n    let exit = document.querySelector(\".exit\");\r\n    exit.classList.remove(\"visible\");\r\n  }\r\n\r\n  regBut() {\r\n    let reg = document.querySelector(\".registration\");\r\n    reg.addEventListener(\"click\", () => {\r\n      this.renderAboutPage();\r\n      history.pushState({}, \"about\", \"#about\");\r\n      window.dispatchEvent(new HashChangeEvent(\"hashchange\"));\r\n    });\r\n  }\r\n\r\n  logBut() {\r\n    let log = document.querySelector(\".login\");\r\n    log.addEventListener(\"click\", () => {\r\n      this.renderMainPage();\r\n      history.pushState({}, \"main\", \"#login\");\r\n      window.dispatchEvent(new HashChangeEvent(\"hashchange\"));\r\n    });\r\n  }\r\n\r\n  checkRegister() {\r\n    if (this.register.isRegistered) {\r\n      this.renderMainPage();\r\n    } else {\r\n      console.log(\"Ошибка регистрации\");\r\n    }\r\n  }\r\n\r\n  localStorageService() {\r\n    if (localStorage.getItem(\"login\")) {\r\n      this.login.renderExitButton();\r\n    } else {\r\n    }\r\n  }\r\n}\r\n\r\nconst app = new App();\r\n","export class Router {\r\n  constructor() {\r\n    this.routes = {\r\n      \"404\": () => {\r\n        console.log(\"Not found\");\r\n      }\r\n    };\r\n    this.mainContentPages = document.querySelectorAll(\".page\");\r\n\r\n    window.addEventListener(\"hashchange\", e => {\r\n      this.render(decodeURI(window.location.hash));\r\n    });\r\n  }\r\n\r\n  addRoute(route, action) {\r\n    this.routes[route] = action;\r\n  }\r\n\r\n  render(url) {\r\n    let temp = url.split(\"/\")[0];\r\n    [...this.mainContentPages].forEach(page => {\r\n      page.classList.remove(\"visible\");\r\n    });\r\n\r\n    this.routes[temp] ? this.routes[temp]() : this.routes[\"404\"]();\r\n  }\r\n}\r\n","import { Register } from \"./register\";\r\n\r\nexport class ShortService {\r\n  constructor() {\r\n    this.shortLinks = [];\r\n    this.inp = document.querySelector(\".big-link\");\r\n    this.links = [];\r\n    this.getLink();\r\n    this.register2 = new Register();\r\n  }\r\n\r\n  getLink() {\r\n    let but = document.querySelector(\".submit\");\r\n\r\n    but.addEventListener(\"click\", e => {\r\n      e.preventDefault();\r\n      if (this.inp.value) {\r\n        this.sendData(this.inp.value);\r\n      } else {\r\n        this.renderInputError();\r\n      }\r\n    });\r\n  }\r\n\r\n  renderInputError() {\r\n    this.register2.renderErrorSection(\r\n      \"Чтобы укоротить ссылку, ее надо сначала ввести.\"\r\n    );\r\n  }\r\n\r\n  sendData(data) {\r\n    console.log(data);\r\n    fetch(\"http://localhost:3006/links\", {\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        source: data\r\n      })\r\n    })\r\n      .then(res => {\r\n        if (res.status !== 201) {\r\n          console.log(\"Post ERROR\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        this.shortLink(res);\r\n      });\r\n  }\r\n\r\n  shortLink(data) {\r\n    let pref = \"pil/\";\r\n    let shortLink = pref + data.id;\r\n    this.shortLinks.push(shortLink);\r\n    this.renderLinks(shortLink);\r\n    console.log(data);\r\n  }\r\n\r\n  renderLinks(data) {\r\n    let div = document.querySelector(\".result\");\r\n    let container = document.createElement(\"a\");\r\n    let span1 = document.createElement(\"span\");\r\n    let span2 = document.createElement(\"span\");\r\n    let span3 = document.createElement(\"span\");\r\n    console.log(this.inp.value);\r\n    span1.innerHTML = \"Короткая ссылка -  \";\r\n    container.setAttribute(\"href\", this.inp.value);\r\n    container.innerHTML = data;\r\n    span2.innerHTML = \" Оригинальная ссылка: \";\r\n    span3.innerHTML = `${this.inp.value} <br>`;\r\n    div.appendChild(span1);\r\n    div.appendChild(container);\r\n    div.appendChild(span2);\r\n    div.appendChild(span3);\r\n    this.inp.value = \"\";\r\n  }\r\n}\r\n"],"sourceRoot":""}