{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app.js","webpack:///./src/router.js","webpack:///./src/register.js","webpack:///./src/login.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_router","_register","_login","App","_classCallCheck","this","shortLinks","inp","document","querySelector","router","Router","links","register","Register","login","Login","checkLogger","init","getLink","regBut","logBut","window","addEventListener","checkRegister","pages","querySelectorAll","_this","fetch","headers","Content-Type","then","res","json","data","initRoutes","console","log","dispatchEvent","HashChangeEvent","_this2","e","preventDefault","sendData","renderInputError","_this3","method","body","JSON","stringify","source","status","shortLink","id","push","renderLinks","div","container","createElement","setAttribute","innerHTML","appendChild","addRoute","renderHomePage","renderAboutPage","renderMainPage","renderLoginPage","renderErrorPage","forEach","classList","remove","homePage","add","location","hash","aboutPage","_this4","history","pushState","_this5","isRegistered","routes","404","mainContentPages","render","decodeURI","route","action","url","temp","split","concat","_toConsumableArray","page","checkLogin","button","loginArray","some","repeatLogin","checkPassword","password","passwordRepeat","sendRegistration","failedRegistration","renderExitButton","localStorage","setItem","event","Event","isLogged","getItem","exit","exitEvent","removeItem"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { Router } from './router';\r\nimport { Register } from './register';\r\nimport { Login } from './login';\r\n\r\nclass App {\r\n    constructor () {\r\n        this.shortLinks = [];\r\n        this.inp = document.querySelector('.big-link');\r\n        this.router = new Router();\r\n        this.links = [];\r\n        this.register = new Register(false);\r\n        this.login = new Login(false);\r\n        this.login.checkLogger();\r\n        this.init();\r\n        this.getLink();\r\n        this.regBut();\r\n        this.logBut();\r\n        window.addEventListener('checkRegister', this.checkRegister.bind(this));\r\n        this.pages = document.querySelectorAll('.page');\r\n        \r\n        \r\n    }\r\n\r\n    \r\n\r\n    init() {\r\n        const url = 'http://localhost:3006/links';\r\n        fetch(url, { headers: {\r\n            'Content-Type': 'application/json'\r\n        }})\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                this.links = data;\r\n                this.initRoutes();\r\n                console.log(this.links);\r\n                window.dispatchEvent(new HashChangeEvent('hashchange'))\r\n            })\r\n    }\r\n\r\n    getLink() {\r\n        \r\n        let but = document.querySelector('.submit');\r\n        \r\n        but.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            if(this.inp.value) {\r\n                this.sendData(this.inp.value);\r\n            } else {\r\n                this.renderInputError();\r\n            }\r\n        })\r\n    }\r\n\r\n    renderInputError() {\r\n        console.log('Ошибка, Вы не ввели ссылку')\r\n    }\r\n\r\n    sendData(data) {\r\n        console.log(data)\r\n        fetch('http://localhost:3006/links', { method: 'post', headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n            body: JSON.stringify({\r\n                source: data\r\n            })\r\n        }) \r\n            \r\n        .then((res) => {\r\n            if(res.status !== 201) {\r\n                console.log(\"Post ERROR\")\r\n            }\r\n            return res.json();\r\n        })\r\n        .then((res) => {\r\n            this.shortLink(res);\r\n        })\r\n    }\r\n\r\n    shortLink(data) {\r\n        let pref = 'pil/';\r\n        let shortLink = pref + data.id;\r\n        this.shortLinks.push(shortLink);\r\n        this.renderLinks(shortLink)\r\n        console.log(data)\r\n    }\r\n\r\n    renderLinks(data) {\r\n        let div = document.querySelector('.result');\r\n        let container = document.createElement('a')\r\n        console.log(this.inp.value)\r\n        container.setAttribute('href', this.inp.value )\r\n        container.innerHTML = `Ваша короткая ссылка: ${data} ; Исходная ссылка: ${this.inp.value} <br>`;\r\n        div.appendChild(container)\r\n        this.inp.value = '';\r\n    }\r\n\r\n    initRoutes() {\r\n       this.router.addRoute('', this.renderHomePage.bind(this));\r\n       this.router.addRoute('#about', this.renderAboutPage.bind(this));\r\n       this.router.addRoute('#main', this.renderMainPage.bind(this));\r\n       this.router.addRoute('#login', this.renderLoginPage.bind(this));\r\n       this.router.addRoute('404', this.renderErrorPage.bind(this));\r\n    }\r\n\r\n    renderHomePage() {\r\n        this.pages.forEach((i) => {\r\n            console.log(i)\r\n            i.classList.remove('visible')\r\n        })\r\n        let homePage = document.querySelector('.home');\r\n        console.log(homePage)\r\n        homePage.classList.add('visible');\r\n        window.location.hash = ''\r\n       \r\n    }\r\n\r\n    renderAboutPage() {\r\n        this.pages.forEach((i) => {\r\n            console.log(i)\r\n            i.classList.remove('visible')\r\n        })\r\n        let aboutPage = document.querySelector('.about');\r\n        console.log(aboutPage)\r\n        aboutPage.classList.add('visible');\r\n        window.location.hash = '#about'\r\n       \r\n    }\r\n\r\n    renderMainPage() {\r\n        console.log(this.pages)\r\n        this.pages.forEach((i) => {\r\n            console.log(i)\r\n            i.classList.remove('visible')\r\n        })\r\n        let mainPage = document.querySelector('.main');\r\n        mainPage.classList.add('visible');\r\n        window.location.hash = '#main'\r\n        \r\n    }\r\n\r\n    renderErrorPage() {\r\n        this.pages.forEach((i) => {\r\n            console.log(i)\r\n            i.classList.remove('visible')\r\n        })\r\n        let errorPage = document.querySelector('.error');\r\n        errorPage.classList.add('visible');\r\n        window.location.hash = '#error'\r\n       \r\n    }\r\n\r\n    renderLoginPage() {\r\n        this.pages.forEach((i) => {\r\n            console.log(i)\r\n            i.classList.remove('visible')\r\n        })\r\n        let loginPage = document.querySelector('.logpage');\r\n        loginPage.classList.add('visible');\r\n        window.location.hash = '#login'\r\n       \r\n    }\r\n\r\n    regBut() {\r\n        let reg = document.querySelector('.registration');\r\n        reg.addEventListener('click', () => {\r\n            this.renderAboutPage()\r\n            history.pushState( {},\"about\" , \"#about\");\r\n            window.dispatchEvent(new HashChangeEvent('hashchange'))\r\n            \r\n        })\r\n    }\r\n\r\n    logBut() {\r\n        let log = document.querySelector('.login');\r\n        log.addEventListener('click', () => {\r\n            this.renderMainPage()\r\n            history.pushState( {},\"main\" , \"#login\");\r\n            window.dispatchEvent(new HashChangeEvent('hashchange'))\r\n        })\r\n    }\r\n\r\n    checkRegister() {\r\n       if(this.register.isRegistered) {\r\n           console.log(1)\r\n\r\n            this.renderMainPage();\r\n       } else {\r\n           console.log('Ошибка регистрации')\r\n       }\r\n    }\r\n}\r\n\r\nconst app = new App();","export class Router {\r\n    constructor () {\r\n        this.routes = {\r\n            '404': () => {\r\n                console.log('Not found');\r\n            }\r\n        }\r\n        this.mainContentPages = document.querySelectorAll('.page');\r\n        \r\n    \r\n        window.addEventListener('hashchange', (e) => {\r\n            this.render(decodeURI(window.location.hash))\r\n        })\r\n    }\r\n    \r\n    addRoute(route, action) {\r\n        this.routes[route] = action;\r\n    }\r\n\r\n    render(url) {\r\n        let temp = url.split('/')[0];\r\n        console.log(temp);\r\n        [...this.mainContentPages].forEach((page) => {\r\n            page.classList.remove('visible');\r\n        });\r\n\r\n        this.routes[temp] ? this.routes[temp]() : this.routes['404']();\r\n    }\r\n}","import { Login } from './login';\r\n\r\n\r\nexport class Register {\r\n    constructor (isRegistered) {\r\n        this.login = new Login(false);\r\n        this.login.checkLogger();\r\n        this.isRegistered = isRegistered;\r\n        this.checkLogin();\r\n        \r\n    }\r\n\r\n    checkLogin() {\r\n        let button = document.querySelector('.registration-submit');\r\n        let login = document.querySelector('.registration-login');\r\n        let loginArray = [];\r\n        fetch('http://localhost:3006/users', { headers: {\r\n                'Content-Type': 'application/json'\r\n                }})\r\n                    .then((res) => res.json())\r\n                    .then((data) => {\r\n                        data.forEach((i) => {\r\n                            loginArray.push(i.login)\r\n                        });\r\n                    })\r\n        \r\n        button.addEventListener('click', (e) => { \r\n            e.preventDefault();\r\n            if (login.value) {\r\n                let repeat = loginArray.some((i) => {\r\n                    return (i == login.value);\r\n                })\r\n                repeat ? this.repeatLogin() : this.checkPassword(login.value);\r\n            } else {\r\n                console.log('Поле пустое')\r\n            }\r\n        })  \r\n    }\r\n\r\n    checkPassword(login) {\r\n        let password = document.querySelector('.registration-password');\r\n        let passwordRepeat = document.querySelector('.registration-password-check');\r\n\r\n        if (password.value && passwordRepeat.value) {\r\n            // console.log('yes')\r\n            (password.value == passwordRepeat.value) ? this.sendRegistration(login, password.value) : this.failedRegistration(passwordRepeat);\r\n        } else {\r\n            console.log('Поля с паролем не заполнены')\r\n        }\r\n        console.log('checkpassword')\r\n\r\n    }\r\n\r\n    repeatLogin() {\r\n        console.log('Repeat login')\r\n    }\r\n\r\n    sendRegistration(login, password) {\r\n        \r\n        console.log('Регистрация прошла успешно')\r\n        this.login.renderExitButton();\r\n        fetch('http://localhost:3006/users', { method: 'post', headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n            body: JSON.stringify({\r\n                login: login,\r\n                password: password\r\n            })\r\n        }) \r\n            \r\n        .then((res) => {\r\n            if(res.status !== 201) {\r\n                console.log(\"Post ERROR\")\r\n            }\r\n            return res.json();\r\n        })\r\n        .then((res) => {\r\n            console.log(res);\r\n        })\r\n        this.isRegistered = true;\r\n        localStorage.setItem('login', login);\r\n        let event = new Event('checkRegister');\r\n        window.dispatchEvent(event)\r\n    }\r\n\r\n    failedRegistration(data) {\r\n        data.value = ''\r\n        console.log('Пароли не совпадают. Попробуйте еще')\r\n    }\r\n\r\n    \r\n }","export class Login {\r\n    constructor (isLogged) {\r\n        this.isLogged = isLogged;\r\n        \r\n    }\r\n\r\n    checkLogger() {\r\n        console.log(localStorage.getItem('login'))\r\n        if(localStorage.getItem('login')) {\r\n            console.log(123)\r\n            this.renderExitButton();\r\n            this.isLogged = true;\r\n        } else {\r\n            \r\n        };    \r\n    }\r\n\r\n    renderExitButton() {\r\n        let exit = document.querySelector('.exit');\r\n        exit.classList.add('visible');\r\n        exit.addEventListener('click', this.exitEvent)\r\n    }\r\n    \r\n    exitEvent() {\r\n        this.isLogged = false;\r\n        localStorage.removeItem('login');\r\n        let exit = document.querySelector('.exit');\r\n        exit.classList.remove('visible');       \r\n    }\r\n\r\n   \r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n}"],"sourceRoot":""}